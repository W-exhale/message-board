<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>login</title>
</head>
<body>
<h2>login</h2>
<input id = "username" placeholder="用户名"><br>
<input id = "password" type = "password" placeholder="密码"><br>
<button onclick="login()">登录</button>

<script>
    function login(){
        fetch('/user/login',{
            method:'POST',
            headers:{'Content-Type': 'application/json'},
            body:JSON.stringify({
                username: document.getElementById('username').value,
                password: document.getElementById('password').value
            })
        })
        .then(res => res.json())
        //.then(data => alert(JSON.stringify(data)));
        .then(res => {
            if(res.code === 200){
                // 保存Token到本地
                localStorage.setItem("token", res.data);
                location.href = "message.html";
            }else {
                alert(res.message);
            }
        })
    }
</script>

</body>
</html>